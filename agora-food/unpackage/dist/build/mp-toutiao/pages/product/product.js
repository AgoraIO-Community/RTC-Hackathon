(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{4226:function(t,r,o){"use strict";o.r(r);var e=o("4b4e"),a=o.n(e);for(var i in e)"default"!==i&&function(t){o.d(r,t,function(){return e[t]})}(i);r["default"]=a.a},"4b4e":function(t,r,o){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=i(o("a34a")),a=i(o("ebb05"));function i(t){return t&&t.__esModule?t:{default:t}}function n(t,r,o,e,a,i,n){try{var s=t[i](n),c=s.value}catch(d){return void o(d)}s.done?r(c):Promise.resolve(c).then(e,a)}function s(t){return function(){var r=this,o=arguments;return new Promise(function(e,a){var i=t.apply(r,o);function s(t){n(i,e,a,s,c,"next",t)}function c(t){n(i,e,a,s,c,"throw",t)}s(void 0)})}}var c=function(){return o.e("components/hx-share/hx-share").then(o.bind(null,"7043"))},d=function(){return o.e("components/hx-navbar/hx-navbar").then(o.bind(null,"1197"))},u=function(){return o.e("components/hx-jump-ball/hx-jump-ball").then(o.bind(null,"ec31"))},p=function(){return o.e("components/uni-number-box/uni-number-box").then(o.bind(null,"1575"))},l=t.getSystemInfoSync().statusBarHeight,f={components:{share:c,hxNumberBox:p,jumpBall:u,hxNavbar:d},data:function(){return{pageScroll:{},specClass:"none",specSelected:[],tabs:[{name:"详情",id:"detail"},{name:"评价",id:"eva"},{name:"图文",id:"coll"}],swiperCurrent:0,swiperCurrentSliderLeft:0,showRing:!0,showTabs:!0,showBorder:!1,favorite:!0,num:1,element:[],animaTime:300,cartAnimation:{},cartAnimationData:{},shoppingCartAll:[],storeData:[],showFoot:!0,shippingDees:0,startingPrice:10,goodsTotalPrice:0,goodsTotalNumber:0,shoppCart:[],footHeight:"0",showCar:!1,carGoodsScrollTop:0,shoppingCartStorageName:"shopping_cart",showDiscount:!0,goodsInfoData:{},goodsEvaData:{},currentGoodsData:{},showFormBox:!1,formAnimationData:{},shareList:[{type:1,icon:"/static/shop/share_wechat.png",text:"微信好友"},{type:2,icon:"/static/shop/share_moment.png",text:"朋友圈"},{type:3,icon:"/static/shop/share_qq.png",text:"QQ好友"},{type:4,icon:"/static/shop/share_qqzone.png",text:"QQ空间"}],specList:[{id:1,name:"尺寸"},{id:2,name:"颜色"}],specChildList:[{id:1,pid:1,name:"XS"},{id:2,pid:1,name:"S"},{id:3,pid:1,name:"M"},{id:4,pid:1,name:"L"},{id:5,pid:1,name:"XL"},{id:6,pid:1,name:"XXL"},{id:7,pid:2,name:"白色"},{id:8,pid:2,name:"珊瑚粉"},{id:9,pid:2,name:"草木绿"}]}},onLoad:function(){var r=s(e.default.mark(function r(o){var i,n=this;return e.default.wrap(function(r){while(1)switch(r.prev=r.next){case 0:i=this,o.id,t.showLoading({title:"加载中"}),setTimeout(function(){i.storeData=a.default.storeData,i.goodsInfoData=a.default.goodsInfo,i.currentGoodsData=a.default.goodsInfo;var r=i.getStoreCart();if(!i.currentGoodsData.form)for(var o in r)if(r[o].id==i.currentGoodsData.id){i.currentGoodsData.number=r[o].number;break}i.goodsEvaData=a.default.goodsEva,setTimeout(function(){i.init(),t.hideLoading()},500)},1e3),this.specList.forEach(function(t){var r=!0,o=!1,e=void 0;try{for(var a,i=n.specChildList[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;if(s.pid===t.id){n.$set(s,"selected",!0),n.specSelected.push(s);break}}}catch(c){o=!0,e=c}finally{try{r||null==i.return||i.return()}finally{if(o)throw e}}}),this.cartAnimation=t.createAnimation({duration:800,timingFunction:"ease",delay:0});case 7:case"end":return r.stop()}},r,this)}));function o(t){return r.apply(this,arguments)}return o}(),onBackPress:function(t){},onPageScroll:function(r){var o=r.scrollTop,e=this;e.pageScroll=r;var a=t.createSelectorQuery().select(".shopping-cart");a.fields({rect:!0},function(t){t.top-l<=44?e.showBorder=!0:e.showBorder=!1}).exec(),o<120?e.showRing=!0:(e.showRing=!1,this.navSearchBgOpacity=1,this.navSearchColor="#888888")},methods:{init:function(){var r=this,o=t.getStorageSync(r.shoppingCartStorageName)||[];for(var e in o)if(o[e].store_idd==r.storeDatastore_idid){r.shoppCart=o[e].shopping_cart;break}for(var a in r.shoppCart)r.goodsTotalPrice+=r.shoppCart[a].total,r.goodsTotalNumber+=r.shoppCart[a].number;r.starting_price=r.storeData.starting_price,r.shipping_dees=r.storeData.shipping_dees,r.setLabelNumber()},backPage:function(){var r=getCurrentPages().length;console.log(r),1==r?t.redirectTo({url:"/pages/index/index"}):t.navigateBack({animationType:"zoom-in"})},swiperChange:function(r,o){this.swiperCurrent=r,this.swiperCurrentSliderLeft=70*r;var e=t.createSelectorQuery().select("#productPage");e.boundingClientRect(function(r){var e=t.createSelectorQuery().select("#"+o);e.boundingClientRect(function(o){var e=t.createSelectorQuery().select(".shopping-cart");e.fields({size:!0},function(e){t.pageScrollTo({duration:300,scrollTop:o.top-r.top-l-44-e.height})}).exec()}).exec()}).exec()},mpClear:function(t){t.stopPropagation()},showShoppingCar:function(){0!=this.goodsTotalNumber&&(this.footHeight="100%",this.showCar=!0,this.carGoodsScrollTop=0)},hideShoppingCar:function(){this.footHeight="0",this.showCar=!1},clearShoppingCart:function(){var r=this;for(var o in r.shoppCart=[],r.storeData.shopping_cart=[],r.shoppingCartAll)r.shoppingCartAll[o].store_idd==r.storeDatastore_idid&&(r.shoppingCartAll[o]=r.storeData);for(var e in t.setStorageSync(r.shoppingCartStorageName,r.shoppingCartAll),r.goodsList)r.goodsList[e].number=0;for(var a in r.categoryList)r.categoryList[a].number=0;r.goodsTotalPrice=0,r.goodsTotalNumber=0,r.hideShoppingCar()},touchOnAddGoods:function(t,r){this.element=[t,".cart"],this.num++},storeAddGoods:function(r,o){var e=this,a=[],i=0,n=0,s=!1;r=Number(r);var c=t.getStorageSync(e.shoppingCartStorageName)||[];for(var d in c)if(c[d].store_id==e.storeData.store_id){a=c[d].shopping_cart;break}var u=!1;o.current_form&&(u=!0);var p=null;for(var l in a)if(a[l].id==o.id&&(u?a[l].current_form.id==o.current_form.id&&(s=!0):s=!0,s)){if(r<=0){p=a[l];break}u?(a[l].price=o.current_form.price,a[l].oldprice=o.current_form.oldprice,a[l].total=r*o.current_form.price):(a[l].price=o.price,a[l].total=r*o.price,a[l].oldprice=o.oldprice),a[l].number=o.number=r;break}if(null!=p){if(!c)return[];for(var f in c)if(c[f].store_id==e.storeData.store_id){var h=a.indexOf(p);for(var m in h>-1&&a.splice(h,1),c[f].shopping_cart=a,a)i+=a[m].total,n+=a[m].number;for(var g in e.goodsList)if(e.goodsList[g].id==o.id){e.goodsList[g]=o;break}break}}else{for(var l in s||(o.form?(o.price=o.current_form.price,o.oldprice=o.current_form.oldprice,o.total=r*o.current_form.price):o.total=r*o.price,o.number=r,a.push(o)),a)i+=a[l].total,n+=a[l].number;e.storeData.shopping_cart=a;var v=!0;for(var b in c)c[b].store_id==e.storeData.store_id&&(c[b]=e.storeData,v=!1);!0===v&&c.push(e.storeData)}return e.shoppCart=a,e.shoppingCartAll=c,e.currentGoodsData.number=r,t.setStorageSync(e.shoppingCartStorageName,c),{shoppCart:a,totalPrice:i,totalNumber:n}},addGoodsChange:function(t,r){t=Number(t);var o=this,e={id:r.id,type_id:r.type_id,name:r.name,descripe:r.descripe,img:r.img,price:r.price,oldprice:r.oldprice,number:t};r.form&&(e.form=r.form,e.form_child=r.form_child,e.current_form=r.current_form);var a=o.storeAddGoods(t,e);console.log(a.totalPrice),a.totalPrice&&(o.goodsTotalPrice<a.totalPrice?setTimeout(function(){o.goodsTotalPrice=a.totalPrice,o.goodsTotalNumber=a.totalNumber},o.animaTime+150):(o.goodsTotalPrice=a.totalPrice,o.goodsTotalNumber=a.totalNumber),0==o.goodsTotalNumber&&o.hideShoppingCar())},setLabelNumber:function(){var t=this;for(var r in t.categoryList){var o=0;for(var e in t.shoppCart)t.shoppCart[e].type_id==t.categoryList[r].id&&(o+=t.shoppCart[e].number);t.categoryList[r].number=o}},jiesuan:function(){t.navigateTo({url:"/pages/order/preview"})},contact:function(){t.showModal({title:"",content:"联系商家"})},jbMsg:function(t){var r=this;r.cartAnimation.matrix(1,0,0,.7,0,7).step({duration:100}),r.cartAnimation.matrix(1,0,0,1,0,0).step({duration:150}),r.cartAnimationData=r.cartAnimation.export()},previewImg:function(r,o){t.previewImage({current:r,urls:o,indicator:"default"})},showForm:function(r){var o=this,e=o.getStoreCart();if(e){var a=null;for(var i in e)if(e[i].id==r.id){a=e[i];break}if(a){var n=!1;for(var s in r.form_child)r.form_child[s].id==a.current_form.id?n?r.form_child[s].select=!1:(r.form_child[s].select=!0,r.number=a.number,n=!0):r.form_child[s].select=!1}}var c=t.createAnimation({timingFunction:"ease"});o.currentGoodsData=r,this.animation=c,c.top(0).bottom(0).left(0).right(0).step({duration:0}),c.opacity(1).step({duration:300}),this.formAnimationData=c.export(),o.showFormBox=!0},hiddenForm:function(){var r=t.createAnimation({timingFunction:"ease"});this.animation=r,r.scale(0,0).opacity(0).step({duration:300}),r.top(0).bottom(0).left("-100%").right("100%").step({duration:0}),this.formAnimationData=r.export();var o=this;o.showFormBox=!1},formFirstAddGoods:function(){var t=this;t.formAddGoodsChange(1,t.currentGoodsData),t.touchOnAddGoods("#eleAdd",t.currentGoodsData)},formAddGoodsChange:function(t,r){var o=this;if(1==t)for(var e in r.form_child)if(1==r.form_child[e].select){o.currentGoodsData.current_form=r.form_child[e];break}o.addGoodsChange(t,o.currentGoodsData)},selectGoodsForm:function(t,r){var o=this,e=t.form_child,a=0;for(var i in e)e[i].id==r.id?e[i].select=!0:e[i].select=!1;var n=o.getStoreCart();if(n)for(var s in n)if(n[s].id==t.id&&n[s].current_form.id==r.id){a=n[s].number;break}t.number=a,this.currentGoodsData=t},getCartGoodsNum:function(t){var r=this.getStoreCart(),o=0;if(r)for(var e in r)r[e].id==t.id&&(o+=r[e].number);return o},getStoreCart:function(){var r=this,o={},e=t.getStorageSync(r.shoppingCartStorageName)||[];if(e){for(var a in e)if(e[a].store_id==r.storeData.store_id){o=e[a].shopping_cart;break}}else r.storeData.shopping_cart=[],t.setStorageSync(r.shoppingCartStorageName,r.storeData);return o},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.favorite=!this.favorite},buy:function(){t.navigateTo({url:"/pages/shop/order/createOrder"})},stopPrevent:function(){}}};r.default=f}).call(this,o("f266")["default"])},"4eb9":function(t,r,o){"use strict";var e=o("af0a"),a=o.n(e);a.a},"50cf":function(t,r,o){"use strict";(function(t){o("e0ad"),o("921b");e(o("66fd"));var r=e(o("8ac9"));function e(t){return t&&t.__esModule?t:{default:t}}t(r.default)}).call(this,o("f266")["createPage"])},"8ac9":function(t,r,o){"use strict";o.r(r);var e=o("f1bd"),a=o("4226");for(var i in a)"default"!==i&&function(t){o.d(r,t,function(){return a[t]})}(i);o("4eb9");var n,s=o("f0c5"),c=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],n);r["default"]=c.exports},af0a:function(t,r,o){},f1bd:function(t,r,o){"use strict";var e={"hx-navbar":()=>o.e("components/hx-navbar/hx-navbar").then(o.bind(null,"1197"))},a=function(){var t=this,r=t.$createElement,o=(t._self._c,(t.goodsInfoData.price/t.goodsInfoData.oldprice*10).toFixed(1)),e=t.getCartGoodsNum(t.currentGoodsData),a=t.getCartGoodsNum(t.currentGoodsData),i=Math.round(t.goodsEvaData.praise/t.goodsEvaData.sum*100);t.$mp.data=Object.assign({},{$root:{g0:o,m0:e,m1:a,g1:i}})},i=[];o.d(r,"b",function(){return a}),o.d(r,"c",function(){return i}),o.d(r,"a",function(){return e})}},[["50cf","common/runtime","common/vendor"]]]);